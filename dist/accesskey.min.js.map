{"version":3,"file":"accesskey.min.js","sources":["../src/accesskey.js"],"sourcesContent":["function isVisible(t) {\n  return !! (!t.hasAttribute('disabled') && t.getAttribute('aria-hidden') !== 'true' && t.offsetParent !== null);\n}\n\nfunction removeAccesskeyAttribute(selector) {\n  document.querySelectorAll(selector).forEach(function(el) {\n    el.removeAttribute('accesskey');\n  });\n}\nfunction addClass(selector, clsName) {\n  document.querySelectorAll(selector).forEach(function(el) {\n    el.classList.add(clsName);\n  });\n}\n\nfunction gi(i, len, op) {\n  let n = op == '+' ? +1 : -1;\n  i = i + n;\n  if (i >= len) {\n    i = 0;\n  }\n  if (i < 0) {\n    i = len - 1;\n  }\n  return i;\n}\n\nfunction _toFocus(el) {\n  let tagName = el.tagName.toLowerCase();\n  let tagNames = ['div', 'p', 'span', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'ul', 'ol', 'li', 'form', 'img', 'nav', 'header', 'main', 'footer', 'section', 'aside'];\n  if (tagNames.includes(tagName) || (tagName == 'a' && !el.hasAttribute('href'))) {\n    if (!el.hasAttribute('tabindex')) {\n      el.setAttribute('tabindex', '-1');\n    }\n  }\n  el.focus();\n}\n\nfunction toFocus(focusSelector, op) {\n  let els = [...document.body.querySelectorAll('*')];\n  let len = els.length;\n  let aeIndex = Math.max(0, els.indexOf(document.activeElement));\n  let i = aeIndex == 0 ? 0 : gi(aeIndex, len, op);\n  do {\n    if (els[i].matches(focusSelector) && isVisible(els[i])) {\n      _toFocus(els[i]);\n      break;\n    }\n    i = gi(i, len, op);\n  } while ( i != aeIndex );\n}\n\nfunction nextFocus(selector) {\n  toFocus(selector, '+');\n}\n\nfunction previousFocus(selector) {\n  toFocus(selector, '-');\n}\n\nfunction isIE() {\n  return ( !! window.ActiveXObject || \"ActiveXObject\" in window);\n}\n\nif (!isIE()) {\n  let keys = [];\n  document.querySelectorAll('[accesskey]').forEach(function(el) {\n    let key = el.getAttribute('accesskey');\n    if (!keys.includes(key)) {\n      keys.push(key);\n    }\n  });\n  keys.forEach(function(key) {\n    addClass('[accesskey=\"' + key + '\"]', 'accesskey-' + key);\n    removeAccesskeyAttribute('[accesskey=\"' + key + '\"]');\n  });\n\n  document.addEventListener('keydown',\n  function(e) {\n    keys.forEach(function(key) {\n      let keyCode = key.toUpperCase().charCodeAt();\n      if (e.altKey && e.shiftKey && e.keyCode == keyCode) {\n        e.preventDefault();\n        previousFocus('.accesskey-' + key);\n      } else if (e.altKey && e.keyCode == keyCode) {\n        e.preventDefault();\n        nextFocus('.accesskey-' + key);\n      }\n    });\n  },\n  null);\n}"],"names":["gi","i","len","op","_toFocus","el","tagName","toLowerCase","includes","hasAttribute","setAttribute","focus","toFocus","focusSelector","els","document","body","querySelectorAll","length","aeIndex","Math","max","indexOf","activeElement","matches","t","getAttribute","offsetParent","window","ActiveXObject","keys","forEach","key","push","selector","clsName","classList","add","removeAttribute","removeAccesskeyAttribute","addEventListener","e","keyCode","toUpperCase","charCodeAt","altKey","shiftKey","preventDefault","nextFocus"],"mappings":"yBAeA,SAASA,EAAGC,EAAGC,EAAKC,GASlB,OAPAF,GADc,KAANE,EAAY,GAAM,IAEjBD,IACPD,EAAI,GAEFA,EAAI,IACNA,EAAIC,EAAM,GAELD,EAGT,SAASG,EAASC,GAChB,IAAIC,EAAUD,EAAGC,QAAQC,eACV,CAAC,MAAO,IAAK,OAAQ,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,OAAQ,MAAO,MAAO,SAAU,OAAQ,SAAU,UAAW,SAC1IC,SAASF,IAAwB,KAAXA,IAAmBD,EAAGI,aAAa,WAC/DJ,EAAGI,aAAa,aACnBJ,EAAGK,aAAa,WAAY,OAGhCL,EAAGM,QAGL,SAASC,EAAQC,EAAeV,GAC9B,IAAIW,EAAM,IAAIC,SAASC,KAAKC,iBAAiB,MACzCf,EAAMY,EAAII,OACVC,EAAUC,KAAKC,IAAI,EAAGP,EAAIQ,QAAQP,SAASQ,gBAC3CtB,EAAe,GAAXkB,EAAe,EAAInB,EAAGmB,EAASjB,EAAKC,GAC5C,EAAG,CACD,GAAIW,EAAIb,GAAGuB,QAAQX,OA5CJY,EA4CgCX,EAAIb,IA3CvCQ,aAAa,aAAiD,SAAlCgB,EAAEC,aAAa,gBAAgD,OAAnBD,EAAEE,cA2C9B,CACtDvB,EAASU,EAAIb,IACb,MAEFA,EAAID,EAAGC,EAAGC,EAAKC,SACPF,GAAKkB,GAjDjB,IAAmBM,EAgEnB,IAHcG,OAAOC,iBAAiB,kBAAmBD,QAG5C,CACX,IAAIE,EAAO,GACXf,SAASE,iBAAiB,eAAec,SAAQ,SAAS1B,GACxD,IAAI2B,EAAM3B,EAAGqB,aAAa,aACrBI,EAAKtB,SAASwB,IACjBF,EAAKG,KAAKD,MAGdF,EAAKC,SAAQ,SAASC,GA/DxB,IAAkBE,EAAUC,EAAVD,EAgEL,eAAiBF,EAAM,KAhERG,EAgEc,aAAeH,EA/DvDjB,SAASE,iBAAiBiB,GAAUH,SAAQ,SAAS1B,GACnDA,EAAG+B,UAAUC,IAAIF,MAPrB,SAAkCD,GAChCnB,SAASE,iBAAiBiB,GAAUH,SAAQ,SAAS1B,GACnDA,EAAGiC,gBAAgB,gBAoEnBC,CAAyB,eAAiBP,EAAM,SAGlDjB,SAASyB,iBAAiB,WAC1B,SAASC,GACPX,EAAKC,SAAQ,SAASC,GACpB,IAAIU,EAAUV,EAAIW,cAAcC,aAC5BH,EAAEI,QAAUJ,EAAEK,UAAYL,EAAEC,SAAWA,GACzCD,EAAEM,iBAzBRnC,EA0BoB,cAAgBoB,EA1BlB,MA2BHS,EAAEI,QAAUJ,EAAEC,SAAWA,IAClCD,EAAEM,iBAjCV,SAAmBb,GACjBtB,EAAQsB,EAAU,KAiCZc,CAAU,cAAgBhB,SAIhC"}