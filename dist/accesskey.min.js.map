{"version":3,"file":"accesskey.min.js","sources":["../src/accesskey.js"],"sourcesContent":["  function isVisible(t) {\r\n    return !! (!t.hasAttribute('disabled') && t.getAttribute('aria-hidden') !== 'true' && t.offsetParent !== null);\r\n  }\r\n\r\n  function removeAccesskeyAttribute(selector) {\r\n    document.querySelectorAll(selector).forEach(function(el) {\r\n      el.removeAttribute('accesskey');\r\n    });\r\n  }\r\n  function addClass(selector, clsName) {\r\n    document.querySelectorAll(selector).forEach(function(el) {\r\n      el.classList.add(clsName);\r\n    });\r\n  }\r\n  function toFocus(focusSelector, op) {\r\n    let els = document.all;\r\n    let len = els.length;\r\n    let ae = document.activeElement;\r\n    let aeIndex = 0,\r\n    index = 0;\r\n    for (let i = 0; i < len; i++) {\r\n      if (els[i] == ae) {\r\n        aeIndex = index = i;\r\n        break;\r\n      }\r\n    }\r\n    let i = op == '+' ? index + 1 : index - 1;\r\n    while (i != aeIndex) {\r\n      if (els[i].matches(focusSelector) && isVisible(els[i])) {\r\n        index = i;\r\n        break;\r\n      }\r\n      i = op == '+' ? i + 1 : i - 1;\r\n      if (i >= len) {\r\n        i = 0;\r\n      }\r\n      if (i < 0) {\r\n        i = len - 1;\r\n      }\r\n    }\r\n    let el = els[index];\r\n    let tagName = el.tagName.toLowerCase();\r\n    let pels = ['div', 'p', 'span', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'ul', 'ol', 'li', 'form', 'img', 'nav', 'header', 'main', 'footer', 'section', 'aside'];\r\n    if (pels.includes(tagName) || (tagName == 'a' && !el.hasAttribute('href'))) {\r\n      if (!el.hasAttribute('tabindex')) {\r\n        el.setAttribute('tabindex', '-1');\r\n      }\r\n    }\r\n    el.focus();\r\n  }\r\n\r\n  function nextFocus(selector) {\r\n    toFocus(selector, '+');\r\n  }\r\n\r\n  function previousFocus(selector) {\r\n    toFocus(selector, '-');\r\n  }\r\n\r\n  function isIE() {\r\n    return ( !! window.ActiveXObject || \"ActiveXObject\" in window);\r\n  }\r\n\r\n  if (!isIE()) {\r\n    let els = document.querySelectorAll('[accesskey]');\r\n    let keys = [];\r\n    els.forEach(function(el) {\r\n      let key = el.getAttribute('accesskey');\r\n      if (!keys.includes(key)) {\r\n        keys.push(key);\r\n      }\r\n    });\r\n    keys.forEach(function(key) {\r\n      addClass('[accesskey=\"' + key + '\"]', 'accesskey-' + key);\r\n      removeAccesskeyAttribute('[accesskey=\"' + key + '\"]');\r\n    });\r\n\r\n    document.addEventListener('keydown',\r\n    function(e) {\r\n      keys.forEach(function(key) {\r\n        let keyCode = key.toUpperCase().charCodeAt();\r\n        if (e.altKey && e.shiftKey && e.keyCode == keyCode) {\r\n          e.preventDefault();\r\n          previousFocus('.accesskey-' + key);\r\n        }\r\n        else if (e.altKey && e.keyCode == keyCode) {\r\n          e.preventDefault();\r\n          nextFocus('.accesskey-' + key);\r\n        }\r\n      });\r\n    },\r\n    null);\r\n  }\r\n"],"names":["toFocus","focusSelector","op","els","document","all","len","length","ae","activeElement","aeIndex","index","i","matches","t","hasAttribute","getAttribute","offsetParent","el","tagName","toLowerCase","includes","setAttribute","focus","window","ActiveXObject","querySelectorAll","keys","forEach","key","push","selector","clsName","classList","add","removeAttribute","removeAccesskeyAttribute","addEventListener","e","keyCode","toUpperCase","charCodeAt","altKey","shiftKey","preventDefault","nextFocus"],"mappings":"yBAcE,SAASA,EAAQC,EAAeC,GAC9B,IAAIC,EAAMC,SAASC,IACfC,EAAMH,EAAII,OACVC,EAAKJ,SAASK,cACdC,EAAU,EACdC,EAAQ,EACR,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAAKM,IACvB,GAAIT,EAAIS,IAAMJ,EAAI,CAChBE,EAAUC,EAAQC,EAClB,MAGJ,IAAIA,EAAU,KAANV,EAAYS,EAAQ,EAAIA,EAAQ,EACxC,KAAOC,GAAKF,GAAS,CACnB,GAAIP,EAAIS,GAAGC,QAAQZ,OA5BJa,EA4BgCX,EAAIS,IA3BvCG,aAAa,aAAiD,SAAlCD,EAAEE,aAAa,gBAAgD,OAAnBF,EAAEG,cA2B9B,CACtDN,EAAQC,EACR,MAEFA,EAAU,KAANV,EAAYU,EAAI,EAAIA,EAAI,EACxBA,GAAKN,IACPM,EAAI,GAEFA,EAAI,IACNA,EAAIN,EAAM,GArChB,IAAmBQ,EAwCjB,IAAII,EAAKf,EAAIQ,GACTQ,EAAUD,EAAGC,QAAQC,eACd,CAAC,MAAO,IAAK,OAAQ,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,OAAQ,MAAO,MAAO,SAAU,OAAQ,SAAU,UAAW,SAC1IC,SAASF,IAAwB,KAAXA,IAAmBD,EAAGH,aAAa,WAC3DG,EAAGH,aAAa,aACnBG,EAAGI,aAAa,WAAY,OAGhCJ,EAAGK,QAeL,IAHcC,OAAOC,iBAAiB,kBAAmBD,QAG5C,CACX,IAAIrB,EAAMC,SAASsB,iBAAiB,eAChCC,EAAO,GACXxB,EAAIyB,SAAQ,SAASV,GACnB,IAAIW,EAAMX,EAAGF,aAAa,aACrBW,EAAKN,SAASQ,IACjBF,EAAKG,KAAKD,MAGdF,EAAKC,SAAQ,SAASC,GA/DxB,IAAkBE,EAAUC,EAAVD,EAgEL,eAAiBF,EAAM,KAhERG,EAgEc,aAAeH,EA/DvDzB,SAASsB,iBAAiBK,GAAUH,SAAQ,SAASV,GACnDA,EAAGe,UAAUC,IAAIF,MAPrB,SAAkCD,GAChC3B,SAASsB,iBAAiBK,GAAUH,SAAQ,SAASV,GACnDA,EAAGiB,gBAAgB,gBAoEnBC,CAAyB,eAAiBP,EAAM,SAGlDzB,SAASiC,iBAAiB,WAC1B,SAASC,GACPX,EAAKC,SAAQ,SAASC,GACpB,IAAIU,EAAUV,EAAIW,cAAcC,aAC5BH,EAAEI,QAAUJ,EAAEK,UAAYL,EAAEC,SAAWA,GACzCD,EAAEM,iBA1BR5C,EA2BoB,cAAgB6B,EA3BlB,MA6BLS,EAAEI,QAAUJ,EAAEC,SAAWA,IAChCD,EAAEM,iBAnCV,SAAmBb,GACjB/B,EAAQ+B,EAAU,KAmCZc,CAAU,cAAgBhB,SAIhC"}